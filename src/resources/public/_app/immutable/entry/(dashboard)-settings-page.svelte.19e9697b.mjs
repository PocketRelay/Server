import{S as Bt,i as St,s as Ut,y as ae,a as b,z as ne,c as w,A as oe,b as H,g as O,d as V,B as ue,h as n,I as It,k as i,q as E,l as c,m as p,r as y,n as o,G as t,R as X,M as j,T as at,v as nt,f as ot,U as ut,H as Lt,u as ft}from"../chunks/index.6f0c0f63.mjs";import{g as Ot}from"../chunks/navigation.5c5bc22e.mjs";import{o as Ht,p as Pt,q as qt,t as Rt,c as Gt}from"../chunks/api.15f7bc3a.mjs";import{D as Mt}from"../chunks/DashboardPage.c4ea9bf6.mjs";import{D as $t,K as Wt,a as Ft}from"../chunks/Delete.b3a2e8ea.mjs";import{L as it}from"../chunks/Loader.f33e46d2.mjs";import{A as Vt}from"../chunks/Account.0033cbd6.mjs";function Ct(f){let r,e=f[0].error+"",a;return{c(){r=i("p"),a=E(e),this.h()},l(s){r=c(s,"P",{class:!0});var l=p(r);a=y(l,e),l.forEach(n),this.h()},h(){o(r,"class","error")},m(s,l){H(s,r,l),t(r,a)},p(s,l){l&1&&e!==(e=s[0].error+"")&&ft(a,e)},d(s){s&&n(r)}}}function At(f){let r,e;return r=new it({}),{c(){ae(r.$$.fragment)},l(a){ne(r.$$.fragment,a)},m(a,s){oe(r,a,s),e=!0},i(a){e||(O(r.$$.fragment,a),e=!0)},o(a){V(r.$$.fragment,a),e=!1},d(a){ue(r,a)}}}function Nt(f){let r,e=f[1].error+"",a;return{c(){r=i("p"),a=E(e),this.h()},l(s){r=c(s,"P",{class:!0});var l=p(r);a=y(l,e),l.forEach(n),this.h()},h(){o(r,"class","error")},m(s,l){H(s,r,l),t(r,a)},p(s,l){l&2&&e!==(e=s[1].error+"")&&ft(a,e)},d(s){s&&n(r)}}}function kt(f){let r,e;return r=new it({}),{c(){ae(r.$$.fragment)},l(a){ne(r.$$.fragment,a)},m(a,s){oe(r,a,s),e=!0},i(a){e||(O(r.$$.fragment,a),e=!0)},o(a){V(r.$$.fragment,a),e=!1},d(a){ue(r,a)}}}function Dt(f){let r,e=f[2].error+"",a;return{c(){r=i("p"),a=E(e),this.h()},l(s){r=c(s,"P",{class:!0});var l=p(r);a=y(l,e),l.forEach(n),this.h()},h(){o(r,"class","error")},m(s,l){H(s,r,l),t(r,a)},p(s,l){l&4&&e!==(e=s[2].error+"")&&ft(a,e)},d(s){s&&n(r)}}}function Tt(f){let r,e;return r=new it({}),{c(){ae(r.$$.fragment)},l(a){ne(r.$$.fragment,a)},m(a,s){oe(r,a,s),e=!0},i(a){e||(O(r.$$.fragment,a),e=!0)},o(a){V(r.$$.fragment,a),e=!1},d(a){ue(r,a)}}}function Kt(f){let r,e,a,s,l,m,u,h,R,L,N,A,T,J,P,g,Z,C,B,Q,k,$,_e,Y,Ee,v,_,z,re,ye,fe,le,ie,Pe,de,ke,ce,$e,He,qe,x,Re,pe,Ce,Ge,Me,ee,We,me,Ae,Fe,Ve,te,Ke,he,Ze,ze,q,be,we,je,Je,ge,Ne,Qe,Xe,Ye,De,Te,ve,xe,Be,et,ct;s=new Vt({props:{class:"form__icon"}});let G=f[0].error&&Ct(f),S=f[0].loading&&At();re=new Wt({props:{class:"form__icon"}});let M=f[1].error&&Nt(f),U=f[1].loading&&kt();we=new Ft({props:{class:"form__icon"}});let W=f[2].error&&Dt(f),I=f[2].loading&&Tt();return{c(){r=i("div"),e=i("form"),a=i("h2"),ae(s.$$.fragment),l=E("Basic Information"),m=b(),u=i("p"),h=E("Here you can modify your basic account information"),R=b(),G&&G.c(),L=b(),S&&S.c(),N=b(),A=i("label"),T=i("span"),J=E("Username"),P=b(),g=i("input"),Z=b(),C=i("label"),B=i("span"),Q=E("Email"),k=b(),$=i("input"),_e=b(),Y=i("button"),Ee=E("Save Changes"),v=b(),_=i("form"),z=i("h2"),ae(re.$$.fragment),ye=E(`\r
                Password`),fe=b(),le=i("p"),ie=E(`Here you can change your account password using your current\r
                password`),Pe=b(),M&&M.c(),de=b(),U&&U.c(),ke=b(),ce=i("label"),$e=i("span"),He=E("Current Password"),qe=b(),x=i("input"),Re=b(),pe=i("label"),Ce=i("span"),Ge=E("New Password"),Me=b(),ee=i("input"),We=b(),me=i("label"),Ae=i("span"),Fe=E("Confirm Password"),Ve=b(),te=i("input"),Ke=b(),he=i("button"),Ze=E("Change Password"),ze=b(),q=i("form"),be=i("h2"),ae(we.$$.fragment),je=E(`\r
                Delete Account`),Je=b(),ge=i("p"),Ne=i("span"),Qe=E("DANGER ZONE"),Xe=E(` Warning deleting your account\r
                is perminent and cannot be reversed`),Ye=b(),W&&W.c(),De=b(),I&&I.c(),Te=b(),ve=i("button"),xe=E("Delete Account"),this.h()},l(d){r=c(d,"DIV",{class:!0});var D=p(r);e=c(D,"FORM",{class:!0});var K=p(e);a=c(K,"H2",{class:!0});var tt=p(a);ne(s.$$.fragment,tt),l=y(tt,"Basic Information"),tt.forEach(n),m=w(K),u=c(K,"P",{class:!0});var pt=p(u);h=y(pt,"Here you can modify your basic account information"),pt.forEach(n),R=w(K),G&&G.l(K),L=w(K),S&&S.l(K),N=w(K),A=c(K,"LABEL",{class:!0});var Se=p(A);T=c(Se,"SPAN",{class:!0});var mt=p(T);J=y(mt,"Username"),mt.forEach(n),P=w(Se),g=c(Se,"INPUT",{class:!0,type:!0}),Se.forEach(n),Z=w(K),C=c(K,"LABEL",{class:!0});var Ue=p(C);B=c(Ue,"SPAN",{class:!0});var _t=p(B);Q=y(_t,"Email"),_t.forEach(n),k=w(Ue),$=c(Ue,"INPUT",{class:!0,type:!0}),Ue.forEach(n),_e=w(K),Y=c(K,"BUTTON",{type:!0,class:!0});var dt=p(Y);Ee=y(dt,"Save Changes"),dt.forEach(n),K.forEach(n),v=w(D),_=c(D,"FORM",{class:!0});var F=p(_);z=c(F,"H2",{class:!0});var rt=p(z);ne(re.$$.fragment,rt),ye=y(rt,`\r
                Password`),rt.forEach(n),fe=w(F),le=c(F,"P",{class:!0});var ht=p(le);ie=y(ht,`Here you can change your account password using your current\r
                password`),ht.forEach(n),Pe=w(F),M&&M.l(F),de=w(F),U&&U.l(F),ke=w(F),ce=c(F,"LABEL",{class:!0});var Ie=p(ce);$e=c(Ie,"SPAN",{class:!0});var bt=p($e);He=y(bt,"Current Password"),bt.forEach(n),qe=w(Ie),x=c(Ie,"INPUT",{class:!0,type:!0,autocomplete:!0}),Ie.forEach(n),Re=w(F),pe=c(F,"LABEL",{class:!0});var Le=p(pe);Ce=c(Le,"SPAN",{class:!0});var wt=p(Ce);Ge=y(wt,"New Password"),wt.forEach(n),Me=w(Le),ee=c(Le,"INPUT",{class:!0,type:!0,autocomplete:!0}),Le.forEach(n),We=w(F),me=c(F,"LABEL",{class:!0});var Oe=p(me);Ae=c(Oe,"SPAN",{class:!0});var gt=p(Ae);Fe=y(gt,"Confirm Password"),gt.forEach(n),Ve=w(Oe),te=c(Oe,"INPUT",{class:!0,type:!0,autocomplete:!0}),Oe.forEach(n),Ke=w(F),he=c(F,"BUTTON",{type:!0,class:!0});var vt=p(he);Ze=y(vt,"Change Password"),vt.forEach(n),F.forEach(n),ze=w(D),q=c(D,"FORM",{class:!0});var se=p(q);be=c(se,"H2",{class:!0});var st=p(be);ne(we.$$.fragment,st),je=y(st,`\r
                Delete Account`),st.forEach(n),Je=w(se),ge=c(se,"P",{class:!0});var lt=p(ge);Ne=c(lt,"SPAN",{class:!0});var Et=p(Ne);Qe=y(Et,"DANGER ZONE"),Et.forEach(n),Xe=y(lt,` Warning deleting your account\r
                is perminent and cannot be reversed`),lt.forEach(n),Ye=w(se),W&&W.l(se),De=w(se),I&&I.l(se),Te=w(se),ve=c(se,"BUTTON",{type:!0,class:!0});var yt=p(ve);xe=y(yt,"Delete Account"),yt.forEach(n),se.forEach(n),D.forEach(n),this.h()},h(){o(a,"class","form__title"),o(u,"class","text"),o(T,"class","input__label"),o(g,"class","input__value"),o(g,"type","text"),g.required=!0,o(A,"class","input"),o(B,"class","input__label"),o($,"class","input__value"),o($,"type","email"),$.required=!0,o(C,"class","input"),o(Y,"type","submit"),o(Y,"class","button"),o(e,"class","form card"),o(z,"class","form__title"),o(le,"class","text"),o($e,"class","input__label"),o(x,"class","input__value"),o(x,"type","password"),x.required=!0,o(x,"autocomplete","current-password"),o(ce,"class","input"),o(Ce,"class","input__label"),o(ee,"class","input__value"),o(ee,"type","password"),ee.required=!0,o(ee,"autocomplete","off"),o(pe,"class","input"),o(Ae,"class","input__label"),o(te,"class","input__value"),o(te,"type","password"),te.required=!0,o(te,"autocomplete","off"),o(me,"class","input"),o(he,"type","submit"),o(he,"class","button"),o(_,"class","form card"),o(be,"class","form__title"),o(Ne,"class","danger"),o(ge,"class","text"),o(ve,"type","submit"),o(ve,"class","button button--danger"),o(q,"class","form card"),o(r,"class","forms")},m(d,D){H(d,r,D),t(r,e),t(e,a),oe(s,a,null),t(a,l),t(e,m),t(e,u),t(u,h),t(e,R),G&&G.m(e,null),t(e,L),S&&S.m(e,null),t(e,N),t(e,A),t(A,T),t(T,J),t(A,P),t(A,g),X(g,f[0].username),t(e,Z),t(e,C),t(C,B),t(B,Q),t(C,k),t(C,$),X($,f[0].email),t(e,_e),t(e,Y),t(Y,Ee),t(r,v),t(r,_),t(_,z),oe(re,z,null),t(z,ye),t(_,fe),t(_,le),t(le,ie),t(_,Pe),M&&M.m(_,null),t(_,de),U&&U.m(_,null),t(_,ke),t(_,ce),t(ce,$e),t($e,He),t(ce,qe),t(ce,x),X(x,f[1].current),t(_,Re),t(_,pe),t(pe,Ce),t(Ce,Ge),t(pe,Me),t(pe,ee),X(ee,f[1].new),t(_,We),t(_,me),t(me,Ae),t(Ae,Fe),t(me,Ve),t(me,te),X(te,f[1].confirm),t(_,Ke),t(_,he),t(he,Ze),t(r,ze),t(r,q),t(q,be),oe(we,be,null),t(be,je),t(q,Je),t(q,ge),t(ge,Ne),t(Ne,Qe),t(ge,Xe),t(q,Ye),W&&W.m(q,null),t(q,De),I&&I.m(q,null),t(q,Te),t(q,ve),t(ve,xe),Be=!0,et||(ct=[j(g,"input",f[9]),j($,"input",f[10]),j(e,"submit",at(f[3])),j(x,"input",f[11]),j(ee,"input",f[12]),j(te,"input",f[13]),j(_,"submit",at(f[6])),j(q,"submit",at(f[7]))],et=!0)},p(d,D){d[0].error?G?G.p(d,D):(G=Ct(d),G.c(),G.m(e,L)):G&&(G.d(1),G=null),d[0].loading?S?D&1&&O(S,1):(S=At(),S.c(),O(S,1),S.m(e,N)):S&&(nt(),V(S,1,1,()=>{S=null}),ot()),D&1&&g.value!==d[0].username&&X(g,d[0].username),D&1&&$.value!==d[0].email&&X($,d[0].email),d[1].error?M?M.p(d,D):(M=Nt(d),M.c(),M.m(_,de)):M&&(M.d(1),M=null),d[1].loading?U?D&2&&O(U,1):(U=kt(),U.c(),O(U,1),U.m(_,ke)):U&&(nt(),V(U,1,1,()=>{U=null}),ot()),D&2&&x.value!==d[1].current&&X(x,d[1].current),D&2&&ee.value!==d[1].new&&X(ee,d[1].new),D&2&&te.value!==d[1].confirm&&X(te,d[1].confirm),d[2].error?W?W.p(d,D):(W=Dt(d),W.c(),W.m(q,De)):W&&(W.d(1),W=null),d[2].loading?I?D&4&&O(I,1):(I=Tt(),I.c(),O(I,1),I.m(q,Te)):I&&(nt(),V(I,1,1,()=>{I=null}),ot())},i(d){Be||(O(s.$$.fragment,d),O(S),O(re.$$.fragment,d),O(U),O(we.$$.fragment,d),O(I),Be=!0)},o(d){V(s.$$.fragment,d),V(S),V(re.$$.fragment,d),V(U),V(we.$$.fragment,d),V(I),Be=!1},d(d){d&&n(r),ue(s),G&&G.d(),S&&S.d(),ue(re),M&&M.d(),U&&U.d(),ue(we),W&&W.d(),I&&I.d(),et=!1,ut(ct)}}}function Zt(f){let r,e,a,s,l,m,u,h,R,L,N,A,T,J;return{c(){r=i("h3"),e=E("Confirm Change Password"),a=b(),s=i("p"),l=E("Are you sure you want to change your account password?"),m=b(),u=i("div"),h=i("button"),R=E("Confirm"),L=b(),N=i("button"),A=E("Cancel"),this.h()},l(P){r=c(P,"H3",{});var g=p(r);e=y(g,"Confirm Change Password"),g.forEach(n),a=w(P),s=c(P,"P",{class:!0});var Z=p(s);l=y(Z,"Are you sure you want to change your account password?"),Z.forEach(n),m=w(P),u=c(P,"DIV",{class:!0});var C=p(u);h=c(C,"BUTTON",{class:!0});var B=p(h);R=y(B,"Confirm"),B.forEach(n),L=w(C),N=c(C,"BUTTON",{class:!0});var Q=p(N);A=y(Q,"Cancel"),Q.forEach(n),C.forEach(n),this.h()},h(){o(s,"class","text"),o(h,"class","button button--alt"),o(N,"class","button button--alt"),o(u,"class","button-group")},m(P,g){H(P,r,g),t(r,e),H(P,a,g),H(P,s,g),t(s,l),H(P,m,g),H(P,u,g),t(u,h),t(h,R),t(u,L),t(u,N),t(N,A),T||(J=[j(h,"click",f[4]),j(N,"click",f[14])],T=!0)},p:Lt,d(P){P&&n(r),P&&n(a),P&&n(s),P&&n(m),P&&n(u),T=!1,ut(J)}}}function zt(f){let r,e,a,s,l,m,u,h,R,L,N,A,T,J,P,g,Z,C,B,Q,k,$,_e,Y,Ee;return{c(){r=i("h3"),e=E("Confirm Account Deletion"),a=b(),s=i("p"),l=i("span"),m=E("WARNING:"),u=E(` Account Deletion is\r
        `),h=i("b"),R=E("perminent"),L=E(` and cannot be reversed enter your password below to confirm\r
        deletion`),N=b(),A=i("label"),T=i("span"),J=E("Password"),P=b(),g=i("input"),Z=b(),C=i("div"),B=i("button"),Q=E("Confirm"),k=b(),$=i("button"),_e=E("Cancel"),this.h()},l(v){r=c(v,"H3",{});var _=p(r);e=y(_,"Confirm Account Deletion"),_.forEach(n),a=w(v),s=c(v,"P",{class:!0});var z=p(s);l=c(z,"SPAN",{class:!0});var re=p(l);m=y(re,"WARNING:"),re.forEach(n),u=y(z,` Account Deletion is\r
        `),h=c(z,"B",{});var ye=p(h);R=y(ye,"perminent"),ye.forEach(n),L=y(z,` and cannot be reversed enter your password below to confirm\r
        deletion`),z.forEach(n),N=w(v),A=c(v,"LABEL",{class:!0});var fe=p(A);T=c(fe,"SPAN",{class:!0});var le=p(T);J=y(le,"Password"),le.forEach(n),P=w(fe),g=c(fe,"INPUT",{class:!0,type:!0,autocomplete:!0}),fe.forEach(n),Z=w(v),C=c(v,"DIV",{class:!0});var ie=p(C);B=c(ie,"BUTTON",{class:!0});var Pe=p(B);Q=y(Pe,"Confirm"),Pe.forEach(n),k=w(ie),$=c(ie,"BUTTON",{class:!0});var de=p($);_e=y(de,"Cancel"),de.forEach(n),ie.forEach(n),this.h()},h(){o(l,"class","danger"),o(s,"class","text"),o(T,"class","input__label"),o(g,"class","input__value"),o(g,"type","password"),g.required=!0,o(g,"autocomplete","current-password"),o(A,"class","input"),o(B,"class","button button--danger"),o($,"class","button button--alt"),o(C,"class","button-group")},m(v,_){H(v,r,_),t(r,e),H(v,a,_),H(v,s,_),t(s,l),t(l,m),t(s,u),t(s,h),t(h,R),t(s,L),H(v,N,_),H(v,A,_),t(A,T),t(T,J),t(A,P),t(A,g),X(g,f[2].password),H(v,Z,_),H(v,C,_),t(C,B),t(B,Q),t(C,k),t(C,$),t($,_e),Y||(Ee=[j(g,"input",f[15]),j(B,"click",f[5]),j($,"click",f[16])],Y=!0)},p(v,_){_&4&&g.value!==v[2].password&&X(g,v[2].password)},d(v){v&&n(r),v&&n(a),v&&n(s),v&&n(N),v&&n(A),v&&n(Z),v&&n(C),Y=!1,ut(Ee)}}}function jt(f){let r,e,a,s,l,m;return r=new Mt({props:{title:"Settings",text:"Edit the settings for your account below",$$slots:{default:[Kt]},$$scope:{ctx:f}}}),a=new $t({props:{visible:f[1].showConfirm,$$slots:{default:[Zt]},$$scope:{ctx:f}}}),l=new $t({props:{visible:f[2].showConfirm,$$slots:{default:[zt]},$$scope:{ctx:f}}}),{c(){ae(r.$$.fragment),e=b(),ae(a.$$.fragment),s=b(),ae(l.$$.fragment)},l(u){ne(r.$$.fragment,u),e=w(u),ne(a.$$.fragment,u),s=w(u),ne(l.$$.fragment,u)},m(u,h){oe(r,u,h),H(u,e,h),oe(a,u,h),H(u,s,h),oe(l,u,h),m=!0},p(u,[h]){const R={};h&262151&&(R.$$scope={dirty:h,ctx:u}),r.$set(R);const L={};h&2&&(L.visible=u[1].showConfirm),h&262146&&(L.$$scope={dirty:h,ctx:u}),a.$set(L);const N={};h&4&&(N.visible=u[2].showConfirm),h&262148&&(N.$$scope={dirty:h,ctx:u}),l.$set(N)},i(u){m||(O(r.$$.fragment,u),O(a.$$.fragment,u),O(l.$$.fragment,u),m=!0)},o(u){V(r.$$.fragment,u),V(a.$$.fragment,u),V(l.$$.fragment,u),m=!1},d(u){ue(r,u),u&&n(e),ue(a,u),u&&n(s),ue(l,u)}}}function Jt(f,r,e){let a;It(f,Pt,k=>e(8,a=k));const s={username:"",email:"",loading:!1,error:null},l={current:"",new:"",confirm:"",showConfirm:!1,loading:!1,error:null},m={password:"",showConfirm:!1,loading:!1,error:null};async function u(){e(0,s.error=null,s),e(0,s.loading=!0,s);try{await Ht(s.username,s.email),Pt.update(k=>(k.email=s.email,k.display_name=s.username,k))}catch(k){let $=k;e(0,s.error=$.text,s),console.error(k)}finally{e(0,s.loading=!1,s)}}async function h(){e(1,l.showConfirm=!1,l),e(1,l.error=null,l),e(1,l.loading=!0,l);try{await qt(l.current,l.new)}catch(k){let $=k;e(1,l.error=$.text,l),console.error($)}finally{e(1,l.loading=!1,l)}}async function R(){e(2,m.showConfirm=!1,m),e(2,m.error=null,m),e(2,m.loading=!0,m);try{await Rt(m.password),Gt(),await Ot("/login")}catch(k){let $=k;e(2,m.error=$.text,m),console.error($)}finally{e(2,m.loading=!1,m)}}function L(){if(l.new!==l.confirm){e(1,l.error="Passwords don't match",l);return}if(l.new.length<=0||l.confirm.length<=0||l.current.length<=0){e(1,l.error="Passwords cannot be empty",l);return}e(1,l.showConfirm=!0,l)}function N(){e(2,m.showConfirm=!0,m)}function A(k){e(0,s.username=k.display_name,s),e(0,s.email=k.email,s)}function T(){s.username=this.value,e(0,s)}function J(){s.email=this.value,e(0,s)}function P(){l.current=this.value,e(1,l)}function g(){l.new=this.value,e(1,l)}function Z(){l.confirm=this.value,e(1,l)}const C=()=>e(1,l.showConfirm=!1,l);function B(){m.password=this.value,e(2,m)}const Q=()=>e(2,m.showConfirm=!1,m);return f.$$.update=()=>{f.$$.dirty&256&&A(a)},[s,l,m,u,h,R,L,N,a,T,J,P,g,Z,C,B,Q]}class sr extends Bt{constructor(r){super(),St(this,r,Jt,jt,Ut,{})}}export{sr as default};
