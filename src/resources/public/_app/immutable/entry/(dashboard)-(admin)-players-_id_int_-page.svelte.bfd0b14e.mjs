import{S as Xt,i as Yt,s as $t,J as Ze,e as Qe,K as Xe,m as b,h as i,n as m,b as U,G as a,H as de,q as P,r as N,u as Pe,d as W,f as ye,g as H,I as Bt,v as Ee,Q as el,y as le,a as A,z as re,c as D,A as ae,B as oe,k as h,l as _,R as ve,M as Z,T as Ye,U as Le,V as tl,W as Lt,N as ll,L as It}from"../chunks/index.6f0c0f63.mjs";import{g as rl}from"../chunks/navigation.8594e275.mjs";import{p as al}from"../chunks/stores.7d6487d1.mjs";import{P as ke,b as ol,s as sl,d as nl,e as il,f as fl,h as Ot,j as ul,k as cl,p as ml}from"../chunks/api.ab561f20.mjs";import{D as pl}from"../chunks/DashboardPage.c4ea9bf6.mjs";import{D as Ke,K as dl,a as xt}from"../chunks/Delete.b3a2e8ea.mjs";import{L as Ie}from"../chunks/Loader.f33e46d2.mjs";import{A as hl}from"../chunks/Account.0033cbd6.mjs";function Ut(s){let e,t;return{c(){e=Ze("desc"),t=P(s[7])},l(l){e=Xe(l,"desc",{});var r=b(e);t=N(r,s[7]),r.forEach(i)},m(l,r){U(l,e,r),a(e,t)},p(l,r){r&128&&Pe(t,l[7])},d(l){l&&i(e)}}}function St(s){let e,t;return{c(){e=Ze("title"),t=P(s[6])},l(l){e=Xe(l,"title",{});var r=b(e);t=N(r,s[6]),r.forEach(i)},m(l,r){U(l,e,r),a(e,t)},p(l,r){r&64&&Pe(t,l[6])},d(l){l&&i(e)}}}function _l(s){let e,t,l,r=s[7]&&Ut(s),o=s[6]&&St(s);return{c(){e=Ze("svg"),r&&r.c(),t=Qe(),o&&o.c(),l=Ze("path"),this.h()},l(n){e=Xe(n,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var u=b(e);r&&r.l(u),t=Qe(),o&&o.l(u),l=Xe(u,"path",{d:!0,fill:!0}),b(l).forEach(i),u.forEach(i),this.h()},h(){m(l,"d","M10 4A4 4 0 0 0 6 8A4 4 0 0 0 10 12A4 4 0 0 0 14 8A4 4 0 0 0 10 4M17 12C16.87 12 16.76 12.09 16.74 12.21L16.55 13.53C16.25 13.66 15.96 13.82 15.7 14L14.46 13.5C14.35 13.5 14.22 13.5 14.15 13.63L13.15 15.36C13.09 15.47 13.11 15.6 13.21 15.68L14.27 16.5C14.25 16.67 14.24 16.83 14.24 17C14.24 17.17 14.25 17.33 14.27 17.5L13.21 18.32C13.12 18.4 13.09 18.53 13.15 18.64L14.15 20.37C14.21 20.5 14.34 20.5 14.46 20.5L15.7 20C15.96 20.18 16.24 20.35 16.55 20.47L16.74 21.79C16.76 21.91 16.86 22 17 22H19C19.11 22 19.22 21.91 19.24 21.79L19.43 20.47C19.73 20.34 20 20.18 20.27 20L21.5 20.5C21.63 20.5 21.76 20.5 21.83 20.37L22.83 18.64C22.89 18.53 22.86 18.4 22.77 18.32L21.7 17.5C21.72 17.33 21.74 17.17 21.74 17C21.74 16.83 21.73 16.67 21.7 16.5L22.76 15.68C22.85 15.6 22.88 15.47 22.82 15.36L21.82 13.63C21.76 13.5 21.63 13.5 21.5 13.5L20.27 14C20 13.82 19.73 13.65 19.42 13.53L19.23 12.21C19.22 12.09 19.11 12 19 12H17M10 14C5.58 14 2 15.79 2 18V20H11.68A7 7 0 0 1 11 17A7 7 0 0 1 11.64 14.09C11.11 14.03 10.56 14 10 14M18 15.5C18.83 15.5 19.5 16.17 19.5 17C19.5 17.83 18.83 18.5 18 18.5C17.16 18.5 16.5 17.83 16.5 17C16.5 16.17 17.17 15.5 18 15.5Z"),m(l,"fill",s[2]),m(e,"viewBox",s[3]),m(e,"width",s[0]),m(e,"height",s[1]),m(e,"class",s[8]),m(e,"aria-label",s[4]),m(e,"aria-hidden",s[5])},m(n,u){U(n,e,u),r&&r.m(e,null),a(e,t),o&&o.m(e,null),a(e,l)},p(n,[u]){n[7]?r?r.p(n,u):(r=Ut(n),r.c(),r.m(e,t)):r&&(r.d(1),r=null),n[6]?o?o.p(n,u):(o=St(n),o.c(),o.m(e,l)):o&&(o.d(1),o=null),u&4&&m(l,"fill",n[2]),u&8&&m(e,"viewBox",n[3]),u&1&&m(e,"width",n[0]),u&2&&m(e,"height",n[1]),u&256&&m(e,"class",n[8]),u&16&&m(e,"aria-label",n[4]),u&32&&m(e,"aria-hidden",n[5])},i:de,o:de,d(n){n&&i(e),r&&r.d(),o&&o.d()}}}function bl(s,e,t){let{size:l="1em"}=e,{width:r=l}=e,{height:o=l}=e,{color:n="currentColor"}=e,{viewBox:u="0 0 24 24"}=e,{ariaLabel:p=void 0}=e,{ariaHidden:w=void 0}=e,{title:C=void 0}=e,{desc:f=void 0}=e,{class:d=void 0}=e;return s.$$set=c=>{"size"in c&&t(9,l=c.size),"width"in c&&t(0,r=c.width),"height"in c&&t(1,o=c.height),"color"in c&&t(2,n=c.color),"viewBox"in c&&t(3,u=c.viewBox),"ariaLabel"in c&&t(4,p=c.ariaLabel),"ariaHidden"in c&&t(5,w=c.ariaHidden),"title"in c&&t(6,C=c.title),"desc"in c&&t(7,f=c.desc),"class"in c&&t(8,d=c.class)},[r,o,n,u,p,w,C,f,d,l]}class gl extends Xt{constructor(e){super(),Yt(this,e,bl,_l,$t,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function wl(s=void 0){const e=document.createElement("input");return e.type="file",e.hidden=!0,s!==void 0&&(e.accept=s),document.body.appendChild(e),new Promise((t,l)=>{e.onchange=()=>{if(e.files===null)return l();const r=e.files.item(0);t(r)},e.oncancel=()=>t(null),e.click(),document.body.removeChild(e)})}function Cl(s,e){const t=document.createElement("a");t.download=s.replace(/[ ^/]/g,"_"),t.href=URL.createObjectURL(e),t.dataset.downloadurl=["application/json",t.download,t.href].join(":"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Rt(s,e,t){const l=s.slice();return l[9]=e[t],l}function vl(s){let e,t,l,r,o,n,u,p,w,C;return e=new pl({props:{title:`Viewing ${s[5].email}`,text:"Edit the settings for this account below",$$slots:{heading:[Pl],default:[kl]},$$scope:{ctx:s}}}),l=new Ke({props:{visible:s[1].showConfirm,$$slots:{default:[Nl]},$$scope:{ctx:s}}}),o=new Ke({props:{visible:s[2].showConfirm,$$slots:{default:[Al]},$$scope:{ctx:s}}}),u=new Ke({props:{visible:s[3].showConfirm,$$slots:{default:[Dl]},$$scope:{ctx:s}}}),w=new Ke({props:{visible:s[4].showConfirm,$$slots:{default:[Tl]},$$scope:{ctx:s}}}),{c(){le(e.$$.fragment),t=A(),le(l.$$.fragment),r=A(),le(o.$$.fragment),n=A(),le(u.$$.fragment),p=A(),le(w.$$.fragment)},l(f){re(e.$$.fragment,f),t=D(f),re(l.$$.fragment,f),r=D(f),re(o.$$.fragment,f),n=D(f),re(u.$$.fragment,f),p=D(f),re(w.$$.fragment,f)},m(f,d){ae(e,f,d),U(f,t,d),ae(l,f,d),U(f,r,d),ae(o,f,d),U(f,n,d),ae(u,f,d),U(f,p,d),ae(w,f,d),C=!0},p(f,d){const c={};d[0]&32&&(c.title=`Viewing ${f[5].email}`),d[0]&815|d[1]&32&&(c.$$scope={dirty:d,ctx:f}),e.$set(c);const I={};d[0]&2&&(I.visible=f[1].showConfirm),d[0]&2|d[1]&32&&(I.$$scope={dirty:d,ctx:f}),l.$set(I);const T={};d[0]&4&&(T.visible=f[2].showConfirm),d[0]&4|d[1]&32&&(T.$$scope={dirty:d,ctx:f}),o.$set(T);const B={};d[0]&8&&(B.visible=f[3].showConfirm),d[0]&8|d[1]&32&&(B.$$scope={dirty:d,ctx:f}),u.$set(B);const L={};d[0]&16&&(L.visible=f[4].showConfirm),d[0]&16|d[1]&32&&(L.$$scope={dirty:d,ctx:f}),w.$set(L)},i(f){C||(H(e.$$.fragment,f),H(l.$$.fragment,f),H(o.$$.fragment,f),H(u.$$.fragment,f),H(w.$$.fragment,f),C=!0)},o(f){W(e.$$.fragment,f),W(l.$$.fragment,f),W(o.$$.fragment,f),W(u.$$.fragment,f),W(w.$$.fragment,f),C=!1},d(f){oe(e,f),f&&i(t),oe(l,f),f&&i(r),oe(o,f),f&&i(n),oe(u,f),f&&i(p),oe(w,f)}}}function yl(s){let e,t,l,r,o;return{c(){e=h("h1"),t=P("Failed to load player"),l=A(),r=h("p"),o=P(s[7]),this.h()},l(n){e=_(n,"H1",{});var u=b(e);t=N(u,"Failed to load player"),u.forEach(i),l=D(n),r=_(n,"P",{class:!0});var p=b(r);o=N(p,s[7]),p.forEach(i),this.h()},h(){m(r,"class","error")},m(n,u){U(n,e,u),a(e,t),U(n,l,u),U(n,r,u),a(r,o)},p(n,u){u[0]&128&&Pe(o,n[7])},i:de,o:de,d(n){n&&i(e),n&&i(l),n&&i(r)}}}function El(s){let e,t;return e=new Ie({}),{c(){le(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,r){ae(e,l,r),t=!0},p:de,i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Ht(s){let e,t=s[0].error+"",l;return{c(){e=h("p"),l=P(t),this.h()},l(r){e=_(r,"P",{class:!0});var o=b(e);l=N(o,t),o.forEach(i),this.h()},h(){m(e,"class","error")},m(r,o){U(r,e,o),a(e,l)},p(r,o){o[0]&1&&t!==(t=r[0].error+"")&&Pe(l,t)},d(r){r&&i(e)}}}function Mt(s){let e,t;return e=new Ie({}),{c(){le(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,r){ae(e,l,r),t=!0},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Vt(s){let e,t=s[1].error+"",l;return{c(){e=h("p"),l=P(t),this.h()},l(r){e=_(r,"P",{class:!0});var o=b(e);l=N(o,t),o.forEach(i),this.h()},h(){m(e,"class","error")},m(r,o){U(r,e,o),a(e,l)},p(r,o){o[0]&2&&t!==(t=r[1].error+"")&&Pe(l,t)},d(r){r&&i(e)}}}function Gt(s){let e,t;return e=new Ie({}),{c(){le(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,r){ae(e,l,r),t=!0},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Wt(s){let e,t,l,r,o,n,u,p,w,C,f,d,c,I,T,B,L;l=new gl({props:{class:"form__icon"}});let v=s[9].error&&jt(s),E=s[9].loading&&Ft(),g=s[10],y=[];for(let k=0;k<g.length;k+=1)y[k]=qt(Rt(s,g,k));return{c(){e=h("form"),t=h("h2"),le(l.$$.fragment),r=P(`\r
            Role`),o=A(),n=h("p"),u=P("Set the role of this account"),p=A(),v&&v.c(),w=A(),E&&E.c(),C=A(),f=h("select");for(let k=0;k<y.length;k+=1)y[k].c();d=A(),c=h("button"),I=P("Apply Role"),this.h()},l(k){e=_(k,"FORM",{class:!0});var S=b(e);t=_(S,"H2",{class:!0});var R=b(t);re(l.$$.fragment,R),r=N(R,`\r
            Role`),R.forEach(i),o=D(S),n=_(S,"P",{class:!0});var F=b(n);u=N(F,"Set the role of this account"),F.forEach(i),p=D(S),v&&v.l(S),w=D(S),E&&E.l(S),C=D(S),f=_(S,"SELECT",{class:!0});var ne=b(f);for(let me=0;me<y.length;me+=1)y[me].l(ne);ne.forEach(i),d=D(S),c=_(S,"BUTTON",{type:!0,class:!0});var V=b(c);I=N(V,"Apply Role"),V.forEach(i),S.forEach(i),this.h()},h(){m(t,"class","form__title"),m(n,"class","text"),m(f,"class","select"),s[9].role===void 0&&tl(()=>s[27].call(f)),m(c,"type","submit"),m(c,"class","button"),m(e,"class","form card")},m(k,S){U(k,e,S),a(e,t),ae(l,t,null),a(t,r),a(e,o),a(e,n),a(n,u),a(e,p),v&&v.m(e,null),a(e,w),E&&E.m(e,null),a(e,C),a(e,f);for(let R=0;R<y.length;R+=1)y[R].m(f,null);Lt(f,s[9].role),a(e,d),a(e,c),a(c,I),T=!0,B||(L=[Z(f,"change",s[27]),Z(e,"submit",Ye(s[14]))],B=!0)},p(k,S){if(k[9].error?v?v.p(k,S):(v=jt(k),v.c(),v.m(e,w)):v&&(v.d(1),v=null),k[9].loading?E?S[0]&512&&H(E,1):(E=Ft(),E.c(),H(E,1),E.m(e,C)):E&&(Ee(),W(E,1,1,()=>{E=null}),ye()),S[0]&1024){g=k[10];let R;for(R=0;R<g.length;R+=1){const F=Rt(k,g,R);y[R]?y[R].p(F,S):(y[R]=qt(F),y[R].c(),y[R].m(f,null))}for(;R<y.length;R+=1)y[R].d(1);y.length=g.length}S[0]&1536&&Lt(f,k[9].role)},i(k){T||(H(l.$$.fragment,k),H(E),T=!0)},o(k){W(l.$$.fragment,k),W(E),T=!1},d(k){k&&i(e),oe(l),v&&v.d(),E&&E.d(),ll(y,k),B=!1,Le(L)}}}function jt(s){let e,t=s[2].error+"",l;return{c(){e=h("p"),l=P(t),this.h()},l(r){e=_(r,"P",{class:!0});var o=b(e);l=N(o,t),o.forEach(i),this.h()},h(){m(e,"class","error")},m(r,o){U(r,e,o),a(e,l)},p(r,o){o[0]&4&&t!==(t=r[2].error+"")&&Pe(l,t)},d(r){r&&i(e)}}}function Ft(s){let e,t;return e=new Ie({}),{c(){le(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,r){ae(e,l,r),t=!0},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function qt(s){let e,t=s[9]+"",l;return{c(){e=h("option"),l=P(t),this.h()},l(r){e=_(r,"OPTION",{});var o=b(e);l=N(o,t),o.forEach(i),this.h()},h(){e.__value=s[9],e.value=e.__value},m(r,o){U(r,e,o),a(e,l)},p:de,d(r){r&&i(e)}}}function zt(s){let e,t=s[3].error+"",l;return{c(){e=h("p"),l=P(t),this.h()},l(r){e=_(r,"P",{class:!0});var o=b(e);l=N(o,t),o.forEach(i),this.h()},h(){m(e,"class","error")},m(r,o){U(r,e,o),a(e,l)},p(r,o){o[0]&8&&t!==(t=r[3].error+"")&&Pe(l,t)},d(r){r&&i(e)}}}function Jt(s){let e,t;return e=new Ie({}),{c(){le(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,r){ae(e,l,r),t=!0},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Kt(s){let e,t,l,r,o,n,u,p,w,C,f,d,c,I,T,B,L;l=new xt({props:{class:"form__icon"}});let v=s[2].error&&Zt(s),E=s[2].loading&&Qt();return{c(){e=h("form"),t=h("h2"),le(l.$$.fragment),r=P(`\r
            Delete Account`),o=A(),n=h("p"),u=h("span"),p=P("DANGER ZONE"),w=P(` Warning deleting an account is\r
            perminent and cannot be reversed`),C=A(),v&&v.c(),f=A(),E&&E.c(),d=A(),c=h("button"),I=P("Delete Account"),this.h()},l(g){e=_(g,"FORM",{class:!0});var y=b(e);t=_(y,"H2",{class:!0});var k=b(t);re(l.$$.fragment,k),r=N(k,`\r
            Delete Account`),k.forEach(i),o=D(y),n=_(y,"P",{class:!0});var S=b(n);u=_(S,"SPAN",{class:!0});var R=b(u);p=N(R,"DANGER ZONE"),R.forEach(i),w=N(S,` Warning deleting an account is\r
            perminent and cannot be reversed`),S.forEach(i),C=D(y),v&&v.l(y),f=D(y),E&&E.l(y),d=D(y),c=_(y,"BUTTON",{type:!0,class:!0});var F=b(c);I=N(F,"Delete Account"),F.forEach(i),y.forEach(i),this.h()},h(){m(t,"class","form__title"),m(u,"class","danger"),m(n,"class","text"),m(c,"type","submit"),m(c,"class","button button--danger"),m(e,"class","form card"),It(e,"form--wide",s[8].role!==ke.SuperAdmin)},m(g,y){U(g,e,y),a(e,t),ae(l,t,null),a(t,r),a(e,o),a(e,n),a(n,u),a(u,p),a(n,w),a(e,C),v&&v.m(e,null),a(e,f),E&&E.m(e,null),a(e,d),a(e,c),a(c,I),T=!0,B||(L=Z(e,"submit",Ye(s[17])),B=!0)},p(g,y){g[2].error?v?v.p(g,y):(v=Zt(g),v.c(),v.m(e,f)):v&&(v.d(1),v=null),g[2].loading?E?y[0]&4&&H(E,1):(E=Qt(),E.c(),H(E,1),E.m(e,d)):E&&(Ee(),W(E,1,1,()=>{E=null}),ye()),(!T||y[0]&256)&&It(e,"form--wide",g[8].role!==ke.SuperAdmin)},i(g){T||(H(l.$$.fragment,g),H(E),T=!0)},o(g){W(l.$$.fragment,g),W(E),T=!1},d(g){g&&i(e),oe(l),v&&v.d(),E&&E.d(),B=!1,L()}}}function Zt(s){let e,t=s[2].error+"",l;return{c(){e=h("p"),l=P(t),this.h()},l(r){e=_(r,"P",{class:!0});var o=b(e);l=N(o,t),o.forEach(i),this.h()},h(){m(e,"class","error")},m(r,o){U(r,e,o),a(e,l)},p(r,o){o[0]&4&&t!==(t=r[2].error+"")&&Pe(l,t)},d(r){r&&i(e)}}}function Qt(s){let e,t;return e=new Ie({}),{c(){le(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,r){ae(e,l,r),t=!0},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function kl(s){let e,t,l,r,o,n,u,p,w,C,f,d,c,I,T,B,L,v,E,g,y,k,S,R,F,ne,V,me,_e,Oe,Ue,be,He,Me,Se,Re,G,M,he,se,q,ie,$,Te,$e,xe,pe,et,Ne,tt,lt,Ve,z,Ae,De,rt,at,Be,ot,st,Ge,We,ge,nt,it,we,ft,ut,Ce,ct,mt,je,pt,bt;r=new hl({props:{class:"form__icon"}});let x=s[0].error&&Ht(s),Q=s[0].loading&&Mt();_e=new dl({props:{class:"form__icon"}});let ee=s[1].error&&Vt(s),X=s[1].loading&&Gt(),J=s[8].role==ke.SuperAdmin&&s[8].id!==s[11]&&Wt(s);De=new xt({props:{class:"form__icon"}});let te=s[3].error&&zt(s),Y=s[3].loading&&Jt(),K=s[8].id!==s[11]&&Kt(s);return{c(){e=h("div"),t=h("form"),l=h("h2"),le(r.$$.fragment),o=P(" Basic Information"),n=A(),u=h("p"),p=P("Modify basic account information"),w=A(),x&&x.c(),C=A(),Q&&Q.c(),f=A(),d=h("label"),c=h("span"),I=P("Username"),T=A(),B=h("input"),L=A(),v=h("label"),E=h("span"),g=P("Email"),y=A(),k=h("input"),S=A(),R=h("button"),F=P("Save Changes"),ne=A(),V=h("form"),me=h("h2"),le(_e.$$.fragment),Oe=P(" Password"),Ue=A(),be=h("p"),He=P("Change the account password to the provided password"),Me=A(),ee&&ee.c(),Se=A(),X&&X.c(),Re=A(),G=h("label"),M=h("span"),he=P("New Password"),se=A(),q=h("input"),ie=A(),$=h("label"),Te=h("span"),$e=P("Confirm Password"),xe=A(),pe=h("input"),et=A(),Ne=h("button"),tt=P("Change Password"),lt=A(),J&&J.c(),Ve=A(),z=h("div"),Ae=h("h2"),le(De.$$.fragment),rt=P(`\r
          Player Data`),at=A(),Be=h("p"),ot=P(`Here you can import and export the player data for this account.\r
          Careful not to import non player data files as it may make the account\r
          unusable`),st=A(),te&&te.c(),Ge=A(),Y&&Y.c(),We=A(),ge=h("button"),nt=P("Export Data"),it=A(),we=h("button"),ft=P("Import Data"),ut=A(),Ce=h("button"),ct=P("Clear Data"),mt=A(),K&&K.c(),this.h()},l(O){e=_(O,"DIV",{class:!0});var j=b(e);t=_(j,"FORM",{class:!0});var fe=b(t);l=_(fe,"H2",{class:!0});var dt=b(l);re(r.$$.fragment,dt),o=N(dt," Basic Information"),dt.forEach(i),n=D(fe),u=_(fe,"P",{class:!0});var gt=b(u);p=N(gt,"Modify basic account information"),gt.forEach(i),w=D(fe),x&&x.l(fe),C=D(fe),Q&&Q.l(fe),f=D(fe),d=_(fe,"LABEL",{class:!0});var Fe=b(d);c=_(Fe,"SPAN",{class:!0});var wt=b(c);I=N(wt,"Username"),wt.forEach(i),T=D(Fe),B=_(Fe,"INPUT",{class:!0,type:!0}),Fe.forEach(i),L=D(fe),v=_(fe,"LABEL",{class:!0});var qe=b(v);E=_(qe,"SPAN",{class:!0});var Ct=b(E);g=N(Ct,"Email"),Ct.forEach(i),y=D(qe),k=_(qe,"INPUT",{class:!0,type:!0}),qe.forEach(i),S=D(fe),R=_(fe,"BUTTON",{type:!0,class:!0});var vt=b(R);F=N(vt,"Save Changes"),vt.forEach(i),fe.forEach(i),ne=D(j),V=_(j,"FORM",{class:!0});var ue=b(V);me=_(ue,"H2",{class:!0});var ht=b(me);re(_e.$$.fragment,ht),Oe=N(ht," Password"),ht.forEach(i),Ue=D(ue),be=_(ue,"P",{class:!0});var yt=b(be);He=N(yt,"Change the account password to the provided password"),yt.forEach(i),Me=D(ue),ee&&ee.l(ue),Se=D(ue),X&&X.l(ue),Re=D(ue),G=_(ue,"LABEL",{class:!0});var ze=b(G);M=_(ze,"SPAN",{class:!0});var Et=b(M);he=N(Et,"New Password"),Et.forEach(i),se=D(ze),q=_(ze,"INPUT",{class:!0,type:!0,autocomplete:!0}),ze.forEach(i),ie=D(ue),$=_(ue,"LABEL",{class:!0});var Je=b($);Te=_(Je,"SPAN",{class:!0});var kt=b(Te);$e=N(kt,"Confirm Password"),kt.forEach(i),xe=D(Je),pe=_(Je,"INPUT",{class:!0,type:!0,autocomplete:!0}),Je.forEach(i),et=D(ue),Ne=_(ue,"BUTTON",{type:!0,class:!0});var Pt=b(Ne);tt=N(Pt,"Change Password"),Pt.forEach(i),ue.forEach(i),lt=D(j),J&&J.l(j),Ve=D(j),z=_(j,"DIV",{class:!0});var ce=b(z);Ae=_(ce,"H2",{class:!0});var _t=b(Ae);re(De.$$.fragment,_t),rt=N(_t,`\r
          Player Data`),_t.forEach(i),at=D(ce),Be=_(ce,"P",{class:!0});var Nt=b(Be);ot=N(Nt,`Here you can import and export the player data for this account.\r
          Careful not to import non player data files as it may make the account\r
          unusable`),Nt.forEach(i),st=D(ce),te&&te.l(ce),Ge=D(ce),Y&&Y.l(ce),We=D(ce),ge=_(ce,"BUTTON",{type:!0,class:!0});var At=b(ge);nt=N(At,"Export Data"),At.forEach(i),it=D(ce),we=_(ce,"BUTTON",{type:!0,class:!0});var Dt=b(we);ft=N(Dt,"Import Data"),Dt.forEach(i),ut=D(ce),Ce=_(ce,"BUTTON",{type:!0,class:!0});var Tt=b(Ce);ct=N(Tt,"Clear Data"),Tt.forEach(i),ce.forEach(i),mt=D(j),K&&K.l(j),j.forEach(i),this.h()},h(){m(l,"class","form__title"),m(u,"class","text"),m(c,"class","input__label"),m(B,"class","input__value"),m(B,"type","text"),B.required=!0,m(d,"class","input"),m(E,"class","input__label"),m(k,"class","input__value"),m(k,"type","email"),k.required=!0,m(v,"class","input"),m(R,"type","submit"),m(R,"class","button"),m(t,"class","form card"),m(me,"class","form__title"),m(be,"class","text"),m(M,"class","input__label"),m(q,"class","input__value"),m(q,"type","password"),q.required=!0,m(q,"autocomplete","off"),m(G,"class","input"),m(Te,"class","input__label"),m(pe,"class","input__value"),m(pe,"type","password"),pe.required=!0,m(pe,"autocomplete","off"),m($,"class","input"),m(Ne,"type","submit"),m(Ne,"class","button"),m(V,"class","form card"),m(Ae,"class","form__title"),m(Be,"class","text"),m(ge,"type","button"),m(ge,"class","button"),m(we,"type","button"),m(we,"class","button"),m(Ce,"type","button"),m(Ce,"class","button button--danger"),m(z,"class","form card"),m(e,"class","forms")},m(O,j){U(O,e,j),a(e,t),a(t,l),ae(r,l,null),a(l,o),a(t,n),a(t,u),a(u,p),a(t,w),x&&x.m(t,null),a(t,C),Q&&Q.m(t,null),a(t,f),a(t,d),a(d,c),a(c,I),a(d,T),a(d,B),ve(B,s[5].display_name),a(t,L),a(t,v),a(v,E),a(E,g),a(v,y),a(v,k),ve(k,s[5].email),a(t,S),a(t,R),a(R,F),a(e,ne),a(e,V),a(V,me),ae(_e,me,null),a(me,Oe),a(V,Ue),a(V,be),a(be,He),a(V,Me),ee&&ee.m(V,null),a(V,Se),X&&X.m(V,null),a(V,Re),a(V,G),a(G,M),a(M,he),a(G,se),a(G,q),ve(q,s[1].new),a(V,ie),a(V,$),a($,Te),a(Te,$e),a($,xe),a($,pe),ve(pe,s[1].confirm),a(V,et),a(V,Ne),a(Ne,tt),a(e,lt),J&&J.m(e,null),a(e,Ve),a(e,z),a(z,Ae),ae(De,Ae,null),a(Ae,rt),a(z,at),a(z,Be),a(Be,ot),a(z,st),te&&te.m(z,null),a(z,Ge),Y&&Y.m(z,null),a(z,We),a(z,ge),a(ge,nt),a(z,it),a(z,we),a(we,ft),a(z,ut),a(z,Ce),a(Ce,ct),a(e,mt),K&&K.m(e,null),je=!0,pt||(bt=[Z(B,"input",s[23]),Z(k,"input",s[24]),Z(t,"submit",Ye(s[12])),Z(q,"input",s[25]),Z(pe,"input",s[26]),Z(V,"submit",Ye(s[16])),Z(ge,"click",s[18]),Z(we,"click",s[21]),Z(Ce,"click",s[20])],pt=!0)},p(O,j){O[0].error?x?x.p(O,j):(x=Ht(O),x.c(),x.m(t,C)):x&&(x.d(1),x=null),O[0].loading?Q?j[0]&1&&H(Q,1):(Q=Mt(),Q.c(),H(Q,1),Q.m(t,f)):Q&&(Ee(),W(Q,1,1,()=>{Q=null}),ye()),j[0]&32&&B.value!==O[5].display_name&&ve(B,O[5].display_name),j[0]&32&&k.value!==O[5].email&&ve(k,O[5].email),O[1].error?ee?ee.p(O,j):(ee=Vt(O),ee.c(),ee.m(V,Se)):ee&&(ee.d(1),ee=null),O[1].loading?X?j[0]&2&&H(X,1):(X=Gt(),X.c(),H(X,1),X.m(V,Re)):X&&(Ee(),W(X,1,1,()=>{X=null}),ye()),j[0]&2&&q.value!==O[1].new&&ve(q,O[1].new),j[0]&2&&pe.value!==O[1].confirm&&ve(pe,O[1].confirm),O[8].role==ke.SuperAdmin&&O[8].id!==O[11]?J?(J.p(O,j),j[0]&256&&H(J,1)):(J=Wt(O),J.c(),H(J,1),J.m(e,Ve)):J&&(Ee(),W(J,1,1,()=>{J=null}),ye()),O[3].error?te?te.p(O,j):(te=zt(O),te.c(),te.m(z,Ge)):te&&(te.d(1),te=null),O[3].loading?Y?j[0]&8&&H(Y,1):(Y=Jt(),Y.c(),H(Y,1),Y.m(z,We)):Y&&(Ee(),W(Y,1,1,()=>{Y=null}),ye()),O[8].id!==O[11]?K?(K.p(O,j),j[0]&256&&H(K,1)):(K=Kt(O),K.c(),H(K,1),K.m(e,null)):K&&(Ee(),W(K,1,1,()=>{K=null}),ye())},i(O){je||(H(r.$$.fragment,O),H(Q),H(_e.$$.fragment,O),H(X),H(J),H(De.$$.fragment,O),H(Y),H(K),je=!0)},o(O){W(r.$$.fragment,O),W(Q),W(_e.$$.fragment,O),W(X),W(J),W(De.$$.fragment,O),W(Y),W(K),je=!1},d(O){O&&i(e),oe(r),x&&x.d(),Q&&Q.d(),oe(_e),ee&&ee.d(),X&&X.d(),J&&J.d(),oe(De),te&&te.d(),Y&&Y.d(),K&&K.d(),pt=!1,Le(bt)}}}function Pl(s){let e,t,l,r,o,n,u,p,w;return{c(){e=h("nav"),t=h("a"),l=P("Back"),r=A(),o=h("a"),n=P("Edit Inventory"),u=A(),p=h("a"),w=P("Edit Classes"),this.h()},l(C){e=_(C,"NAV",{class:!0});var f=b(e);t=_(f,"A",{href:!0,class:!0});var d=b(t);l=N(d,"Back"),d.forEach(i),r=D(f),o=_(f,"A",{href:!0,class:!0});var c=b(o);n=N(c,"Edit Inventory"),c.forEach(i),u=D(f),p=_(f,"A",{href:!0,class:!0});var I=b(p);w=N(I,"Edit Classes"),I.forEach(i),f.forEach(i),this.h()},h(){m(t,"href","/players"),m(t,"class","button button--dark"),m(o,"href",`/players/${s[11]}/inventory`),m(o,"class","button button--dark"),m(p,"href",`/players/${s[11]}/classes`),m(p,"class","button button--dark"),m(e,"class","button-group")},m(C,f){U(C,e,f),a(e,t),a(t,l),a(e,r),a(e,o),a(o,n),a(e,u),a(e,p),a(p,w)},p:de,d(C){C&&i(e)}}}function Nl(s){let e,t,l,r,o,n,u,p,w,C,f,d,c,I;return{c(){e=h("h3"),t=P("Confirm Change Password"),l=A(),r=h("p"),o=P("Are you sure you want to change your account password?"),n=A(),u=h("div"),p=h("button"),w=P("Confirm"),C=A(),f=h("button"),d=P("Cancel"),this.h()},l(T){e=_(T,"H3",{});var B=b(e);t=N(B,"Confirm Change Password"),B.forEach(i),l=D(T),r=_(T,"P",{class:!0});var L=b(r);o=N(L,"Are you sure you want to change your account password?"),L.forEach(i),n=D(T),u=_(T,"DIV",{class:!0});var v=b(u);p=_(v,"BUTTON",{class:!0});var E=b(p);w=N(E,"Confirm"),E.forEach(i),C=D(v),f=_(v,"BUTTON",{class:!0});var g=b(f);d=N(g,"Cancel"),g.forEach(i),v.forEach(i),this.h()},h(){m(r,"class","text"),m(p,"class","button button--dark"),m(f,"class","button button--dark"),m(u,"class","button-group")},m(T,B){U(T,e,B),a(e,t),U(T,l,B),U(T,r,B),a(r,o),U(T,n,B),U(T,u,B),a(u,p),a(p,w),a(u,C),a(u,f),a(f,d),c||(I=[Z(p,"click",s[13]),Z(f,"click",s[28])],c=!0)},p:de,d(T){T&&i(e),T&&i(l),T&&i(r),T&&i(n),T&&i(u),c=!1,Le(I)}}}function Al(s){let e,t,l,r,o,n,u,p,w,C,f,d,c,I,T,B,L,v,E;return{c(){e=h("h3"),t=P("Confirm Account Deletion"),l=A(),r=h("p"),o=h("span"),n=P("WARNING:"),u=P(` Account Deletion is\r
      `),p=h("b"),w=P("perminent"),C=P(" and cannot be reversed"),f=A(),d=h("div"),c=h("button"),I=P("Confirm"),T=A(),B=h("button"),L=P("Cancel"),this.h()},l(g){e=_(g,"H3",{});var y=b(e);t=N(y,"Confirm Account Deletion"),y.forEach(i),l=D(g),r=_(g,"P",{class:!0});var k=b(r);o=_(k,"SPAN",{class:!0});var S=b(o);n=N(S,"WARNING:"),S.forEach(i),u=N(k,` Account Deletion is\r
      `),p=_(k,"B",{});var R=b(p);w=N(R,"perminent"),R.forEach(i),C=N(k," and cannot be reversed"),k.forEach(i),f=D(g),d=_(g,"DIV",{class:!0});var F=b(d);c=_(F,"BUTTON",{class:!0});var ne=b(c);I=N(ne,"Confirm"),ne.forEach(i),T=D(F),B=_(F,"BUTTON",{class:!0});var V=b(B);L=N(V,"Cancel"),V.forEach(i),F.forEach(i),this.h()},h(){m(o,"class","danger"),m(r,"class","text"),m(c,"class","button button--danger"),m(B,"class","button button--dark"),m(d,"class","button-group")},m(g,y){U(g,e,y),a(e,t),U(g,l,y),U(g,r,y),a(r,o),a(o,n),a(r,u),a(r,p),a(p,w),a(r,C),U(g,f,y),U(g,d,y),a(d,c),a(c,I),a(d,T),a(d,B),a(B,L),v||(E=[Z(c,"click",s[15]),Z(B,"click",s[29])],v=!0)},p:de,d(g){g&&i(e),g&&i(l),g&&i(r),g&&i(f),g&&i(d),v=!1,Le(E)}}}function Dl(s){let e,t,l,r,o,n,u,p,w,C,f,d,c,I,T,B,L,v,E;return{c(){e=h("h3"),t=P("Confirm Clear Data"),l=A(),r=h("p"),o=h("span"),n=P("WARNING:"),u=P(` Clearing player data is\r
      `),p=h("b"),w=P("perminent"),C=P(` and cannot be reversed. Make sure you export your data player\r
      data or it will be lost`),f=A(),d=h("div"),c=h("button"),I=P("Confirm"),T=A(),B=h("button"),L=P("Cancel"),this.h()},l(g){e=_(g,"H3",{});var y=b(e);t=N(y,"Confirm Clear Data"),y.forEach(i),l=D(g),r=_(g,"P",{class:!0});var k=b(r);o=_(k,"SPAN",{class:!0});var S=b(o);n=N(S,"WARNING:"),S.forEach(i),u=N(k,` Clearing player data is\r
      `),p=_(k,"B",{});var R=b(p);w=N(R,"perminent"),R.forEach(i),C=N(k,` and cannot be reversed. Make sure you export your data player\r
      data or it will be lost`),k.forEach(i),f=D(g),d=_(g,"DIV",{class:!0});var F=b(d);c=_(F,"BUTTON",{class:!0});var ne=b(c);I=N(ne,"Confirm"),ne.forEach(i),T=D(F),B=_(F,"BUTTON",{class:!0});var V=b(B);L=N(V,"Cancel"),V.forEach(i),F.forEach(i),this.h()},h(){m(o,"class","danger"),m(r,"class","text"),m(c,"class","button button--danger"),m(B,"class","button button--dark"),m(d,"class","button-group")},m(g,y){U(g,e,y),a(e,t),U(g,l,y),U(g,r,y),a(r,o),a(o,n),a(r,u),a(r,p),a(p,w),a(r,C),U(g,f,y),U(g,d,y),a(d,c),a(c,I),a(d,T),a(d,B),a(B,L),v||(E=[Z(c,"click",s[22]),Z(B,"click",s[30])],v=!0)},p:de,d(g){g&&i(e),g&&i(l),g&&i(r),g&&i(f),g&&i(d),v=!1,Le(E)}}}function Tl(s){let e,t,l,r,o,n,u,p,w,C,f,d,c,I,T,B;return{c(){e=h("h3"),t=P("Confirm Import Data"),l=A(),r=h("p"),o=h("span"),n=P("WARNING:"),u=P(` Importing data will replace any existing\r
      data, make sure to export your existing data if you don't want to loose it.\r
      Uploading invalid files can corrupt your player account so make sure to use\r
      the right file`),p=A(),w=h("div"),C=h("button"),f=P("Confirm"),d=A(),c=h("button"),I=P("Cancel"),this.h()},l(L){e=_(L,"H3",{});var v=b(e);t=N(v,"Confirm Import Data"),v.forEach(i),l=D(L),r=_(L,"P",{class:!0});var E=b(r);o=_(E,"SPAN",{class:!0});var g=b(o);n=N(g,"WARNING:"),g.forEach(i),u=N(E,` Importing data will replace any existing\r
      data, make sure to export your existing data if you don't want to loose it.\r
      Uploading invalid files can corrupt your player account so make sure to use\r
      the right file`),E.forEach(i),p=D(L),w=_(L,"DIV",{class:!0});var y=b(w);C=_(y,"BUTTON",{class:!0});var k=b(C);f=N(k,"Confirm"),k.forEach(i),d=D(y),c=_(y,"BUTTON",{class:!0});var S=b(c);I=N(S,"Cancel"),S.forEach(i),y.forEach(i),this.h()},h(){m(o,"class","danger"),m(r,"class","text"),m(C,"class","button button--danger"),m(c,"class","button button--dark"),m(w,"class","button-group")},m(L,v){U(L,e,v),a(e,t),U(L,l,v),U(L,r,v),a(r,o),a(o,n),a(r,u),U(L,p,v),U(L,w,v),a(w,C),a(C,f),a(w,d),a(w,c),a(c,I),T||(B=[Z(C,"click",s[19]),Z(c,"click",s[31])],T=!0)},p:de,d(L){L&&i(e),L&&i(l),L&&i(r),L&&i(p),L&&i(w),T=!1,Le(B)}}}function Bl(s){let e,t,l,r;const o=[El,yl,vl],n=[];function u(p,w){return p[6]?0:p[7]?1:p[5]?2:-1}return~(e=u(s))&&(t=n[e]=o[e](s)),{c(){t&&t.c(),l=Qe()},l(p){t&&t.l(p),l=Qe()},m(p,w){~e&&n[e].m(p,w),U(p,l,w),r=!0},p(p,w){let C=e;e=u(p),e===C?~e&&n[e].p(p,w):(t&&(Ee(),W(n[C],1,1,()=>{n[C]=null}),ye()),~e?(t=n[e],t?t.p(p,w):(t=n[e]=o[e](p),t.c()),H(t,1),t.m(l.parentNode,l)):t=null)},i(p){r||(H(t),r=!0)},o(p){W(t),r=!1},d(p){~e&&n[e].d(p),p&&i(l)}}}function Ll(s,e,t){let l,r;Bt(s,al,G=>t(32,l=G)),Bt(s,ml,G=>t(8,r=G));const o={loading:!1,error:null},n={new:"",confirm:"",showConfirm:!1,loading:!1,error:null},u={showConfirm:!1,loading:!1,error:null},p={showConfirm:!1,loading:!1,error:null},w={showConfirm:!1,loading:!1,error:null},C={role:ke.Default,loading:!1,error:null},f=[ke.Default,ke.Admin],d=parseInt(l.params.id);if(Number.isNaN(d))throw"NaN Player ID";let c=null,I=!1,T=null;async function B(G){t(7,T=null),t(6,I=!0);try{let M=await ol(G);t(5,c=M),c.role!=ke.SuperAdmin&&t(9,C.role=c.role,C)}catch(M){t(7,T=M.text),console.error(M)}finally{t(6,I=!1)}}async function L(){if(c){t(0,o.error=null,o),t(0,o.loading=!0,o);try{await sl(c.id,c.display_name,c.email)}catch(G){let M=G;t(0,o.error=M.text,o),console.error(G)}finally{t(0,o.loading=!1,o)}}}async function v(){if(c){if(t(1,n.showConfirm=!1,n),n.new!==n.confirm){t(1,n.error="Passwords don't match",n);return}t(1,n.error=null,n),t(1,n.loading=!0,n);try{await nl(c.id,n.new)}catch(G){let M=G;t(1,n.error=M.text,n),console.error(M)}finally{t(1,n.loading=!1,n)}}}async function E(){if(c){t(9,C.error=null,C),t(9,C.loading=!0,C);try{await il(c.id,C.role)}catch(G){let M=G;t(9,C.error=M.text,C),console.error(M)}finally{t(9,C.loading=!1,C)}}}async function g(){if(c){t(2,u.showConfirm=!1,u),t(2,u.error=null,u),t(2,u.loading=!0,u);try{await fl(c.id),await rl("/players")}catch(G){let M=G;t(2,u.error=M.text,u),console.error(M)}finally{t(2,u.loading=!1,u)}}}function y(){if(n.new!==n.confirm){t(1,n.error="Passwords don't match",n);return}if(n.new.length<=0||n.confirm.length<=0){t(1,n.error="Passwords cannot be empty",n);return}t(1,n.showConfirm=!0,n)}function k(){t(2,u.showConfirm=!0,u)}async function S(){if(!c)return;t(6,I=!0);const G=c;let M;try{M=await Ot(G.id)}catch(q){let ie=q;t(2,u.error=ie.text,u),console.error(ie),t(3,p.loading=!1,p);return}finally{t(6,I=!1)}const he=new Blob([JSON.stringify(M)],{type:"application/json"}),se=`PocketRelay-${G.display_name}.dat`;Cl(se,he)}async function R(){t(4,w.showConfirm=!1,w),t(6,I=!0);const G=await wl("dat");if(G==null){t(6,I=!1);return}const M=new FileReader;await new Promise((ie,$)=>{M.onload=ie,M.onerror=$,M.onabort=$,M.readAsText(G)});const he=M.result,se=JSON.parse(he);if(typeof se!="object"){console.error("Uploaded file was invalid format"),t(6,I=!1);return}let q=Object.keys(se).map(ie=>{const $=se[ie];return typeof $!="string"?(console.error("Skipping non string value from import",ie,$),Promise.resolve()):ul(d,ie,$)});try{await Promise.all(q)}catch(ie){let $=ie;t(4,w.error=$.text,w),console.error($);return}finally{t(6,I=!1)}}function F(){t(3,p.showConfirm=!0,p)}function ne(){t(4,w.showConfirm=!0,w)}async function V(){if(!c)return;t(3,p.showConfirm=!1,p),t(3,p.error=null,p),t(3,p.loading=!0,p);const G=c.id;let M;try{M=await Ot(G)}catch(se){let q=se;t(2,u.error=q.text,u),console.error(q),t(3,p.loading=!1,p);return}let he=Object.keys(M).map(se=>cl(G,se));try{await Promise.all(he)}catch(se){let q=se;t(2,u.error=q.text,u),console.error(q);return}finally{t(3,p.loading=!1,p)}}B(d);function me(){c.display_name=this.value,t(5,c)}function _e(){c.email=this.value,t(5,c)}function Oe(){n.new=this.value,t(1,n)}function Ue(){n.confirm=this.value,t(1,n)}function be(){C.role=el(this),t(9,C),t(10,f)}return[o,n,u,p,w,c,I,T,r,C,f,d,L,v,E,g,y,k,S,R,F,ne,V,me,_e,Oe,Ue,be,()=>t(1,n.showConfirm=!1,n),()=>t(2,u.showConfirm=!1,u),()=>t(3,p.showConfirm=!1,p),()=>t(4,w.showConfirm=!1,w)]}class Gl extends Xt{constructor(e){super(),Yt(this,e,Ll,Bl,$t,{},null,[-1,-1])}}export{Gl as default};
